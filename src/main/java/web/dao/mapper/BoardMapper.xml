<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
<mapper namespace="web.dao.face.BoardDao">

	<select id="getTotal" resultType="int">
		SELECT count(*)
		FROM board
	</select>
	
	<select id="findPageList" resultType="web.dto.Board" parameterType="web.common.Pagination">
		SELECT board_no, title, content, writer_id, writer_nick, hit, write_date
		FROM (
			SELECT row_number() over (order by board_no desc) R, board.* FROM board
		)
		WHERE R between #{startIndex} and #{endIndex}
	</select>
	
	<select id="findById" parameterType="web.dto.Board" resultType="web.dto.Board">
		SELECT board_no, title, content, writer_id, writer_nick, hit, write_date
		FROM board
		WHERE board_no = #{boardNo} 
	</select>
	
	<insert id="insert" parameterType="web.dto.Board">
		<selectKey order="BEFORE" resultType="int" keyProperty="boardNo">
			SELECT board_seq.nextval FROM dual
		</selectKey>
		INSERT INTO board (board_no, title, content, writer_id, writer_nick)
		VALUES (#{boardNo}, #{title}, #{content}, #{writerId}, #{writerNick})
	</insert>
	
</mapper>